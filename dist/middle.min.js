!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Middle",[],e):"object"==typeof exports?exports.Middle=e():t.Middle=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){!function(e){function n(t,r,c){if(!(this instanceof n))throw new Error("Middle needs to be called with the new keyword");if(!c){var a=new n(t,r,"mi"),o=a.run,l=new n(a.use,a,"ui"),u=l.run;return u.use=l.use.bind(l),s(u,l),o.use=u,s(o,a),o}"function"==typeof t?this.callback="middleInstance"==r?t.bind(this):r!==e?t.bind(r):t:this.callback=function(){return arguments},this.run=function(){return i(arguments,this)},this._stack=[]}function i(t,n){var i=new r(t,n);return"__mUnPr__"===i.__mPrVaPr__?e:i.__mPrVaPr__!==e?i.__mPrVaPr__:i}function s(t,e){t._stack=e._stack,t.callback=e.callback,t.middle=e}function r(t,e){return this._stack=t.callee._stack,this.callback=t.callee.callback.bind(e),this._stack.length?(this._stackIndex=0,this._stackLen=this._stack.length,this.result(this.next.apply(this,t))):this.result(this.callback.apply(null,t))}n.prototype.use=function(t,n){this._stack.push(n!==e?t.bind(n):t)},r.prototype.next=function(){return this._stackIndex<this._stackLen?(this._stackIndex++,this._stack[this._stackIndex-1].bind(null,this.next.bind(this)).apply(null,arguments)):this.callback.apply(null,arguments)},r.prototype.result=function(t){return"object"==typeof t?t:t!==e?{__mPrVaPr__:t}:{__mPrVaPr__:"__mUnPr__"}},t.exports=n}()}])});
//# sourceMappingURL=middle.min.js.map