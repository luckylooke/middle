{"version":3,"file":"middle.es.js","sources":["../src/middle.src.js"],"sourcesContent":["'use strict'\n\nexport default function middle( fn, ctx ) {\n\n\tlet enhanced = function middle_enhanced_fn() {\n\n\t\tlet arg = Array.prototype.slice.call( arguments )\n\n\t\tif ( enhanced._m_ctx === undefined )\n\t\t\tenhanced._m_ctx = this\n\n\t\tif ( enhanced._m_stack.length === enhanced._m_index ) {\n\n\t\t\tenhanced._m_index = 0\n\t\t\treturn fn.apply( enhanced._m_ctx, arg )\n\t\t}\n\n\t\targ.unshift( middle_enhanced_fn )\n\t\treturn enhanced._m_stack[ enhanced._m_index++ ].apply( enhanced._m_ctx, arg )\n\t}\n\n\tenhanced._m_stack = []\n\tenhanced._m_index = 0\n\tenhanced._m_ctx = ctx\n\n\tenhanced.use = ( fn, ctx ) => {\n\n\t\tenhanced._m_stack.push( fn.bind( ctx ) )\n\t}\n\n\treturn enhanced\n}\n\n// ES7 decorator\nexport function decorator( target, keyOrCtx, descriptor ) {\n\n\tif ( !target ) return\n\n\tlet { writable, enumerable } = descriptor\n\n\treturn {\n\t\tget: function () {\n\n\t\t\tlet enhanced = middle( descriptor.value, this )\n\t\t\tObject.defineProperty( this, keyOrCtx, {\n\t\t\t\tvalue: enhanced,\n\t\t\t\twritable: writable,\n\t\t\t\tenumerable: enumerable\n\t\t\t} )\n\n\t\t\treturn enhanced\n\t\t}\n\t}\n}\n"],"names":["middle","fn","ctx","enhanced","middle_enhanced_fn","arg","Array","prototype","slice","call","arguments","undefined","_m_ctx","this","_m_stack","length","_m_index","apply","unshift","use","push","bind","decorator","target","keyOrCtx","descriptor","writable","enumerable","value","defineProperty"],"mappings":"AAEe,QAASA,QAAQC,EAAIC,MAE/BC,GAAW,QAASC,QAEnBC,GAAMC,MAAMC,UAAUC,MAAMC,KAAMC,sBAEbC,KAApBR,EAASS,SACbT,EAASS,OAASC,MAEdV,EAASW,SAASC,SAAWZ,EAASa,YAEjCA,SAAW,EACbf,EAAGgB,MAAOd,EAASS,OAAQP,OAG/Ba,QAASd,GACND,EAASW,SAAUX,EAASa,YAAaC,MAAOd,EAASS,OAAQP,cAGhES,cACAE,SAAW,IACXJ,OAASV,IAETiB,IAAM,SAAElB,EAAIC,KAEXY,SAASM,KAAMnB,EAAGoB,KAAMnB,KAG3BC,EAIR,QAAgBmB,WAAWC,EAAQC,EAAUC,MAEtCF,MAEAG,GAAyBD,EAAzBC,SAAUC,EAAeF,EAAfE,sBAGV,cAEAxB,GAAWH,OAAQyB,EAAWG,MAAOf,oBAClCgB,eAAgBhB,KAAMW,SACrBrB,WACGuB,aACEC,IAGNxB"}