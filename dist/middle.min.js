!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("Middle",[],n):"object"==typeof exports?exports.Middle=n():t.Middle=n()}(this,function(){return function(t){function n(i){if(e[i])return e[i].exports;var s=e[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){!function(n){"use strict";function e(t,i,s){if(!(this instanceof e))throw new Error("Middle needs to be called with the new keyword");if(!s){var r=new e(t,i,"init"),o=r.run.bind(r),c=new e(r.use,r,"init"),a=c.run.bind(c);return a.use=c.use.bind(c),o.use=a,o.middle=r,o}"function"==typeof t?this.callback=t.bind("middleInstance"==i?this:i!==n?i:null):this.callback=function(){},this._stack=[],this.id=Math.random()}function i(t,n,e){return this._stack=t,this.callback=n,this._stack.length?(this._stackIndex=0,this._stackLen=this._stack.length,this.result(this.next.apply(this,e))):this.result(this.callback.apply(null,e))}e.prototype.run=function(){var t=new i(this._stack,this.callback,arguments);return"__mUnPr__"===t.__mPrVaPr__?n:t.__mPrVaPr__!==n?t.__mPrVaPr__:t},e.prototype.use=function(t,e){this._stack.push(e!==n?t.bind(e):t)},i.prototype.next=function(){return this._stackIndex<this._stackLen?(this._stackIndex++,this._stack[this._stackIndex-1].bind(null,this.next.bind(this)).apply(null,arguments)):this.callback.apply(null,arguments)},i.prototype.result=function(t){return"object"==typeof t?t:t!==n?{__mPrVaPr__:t}:{__mPrVaPr__:"__mUnPr__"}},t.exports=e}()}])});
//# sourceMappingURL=middle.min.js.map