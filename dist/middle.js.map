{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 889a8eb4a25b7c4bdd17","webpack:///./src/middle.src.js"],"names":["middle","decorator","fn","ctx","enhanced","middle_enhanced_fn","_m_stack","_m_index","_m_ctx","args","arguments","console","log","txt","undefined","length","apply","unshift","use","useFn","useCtx","index","bound","bind","splice","push","subscribe","subFn","subCtx","onReturn","used","next","res","call","shift","target","key","descriptor","writable","enumerable","get","newEnhanced","value","Object","defineProperty"],"mappings":"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","file":"middle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Middle\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Middle\"] = factory();\n\telse\n\t\troot[\"Middle\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 889a8eb4a25b7c4bdd17","'use strict'\n\nexport default function middle( fn, ctx ) {\n\n\t// TODO: Consider Enhanced class ---> enhanced = new Enhanaced() ???\n\n\tvar enhanced = middle_enhanced_fn\n\n\tenhanced._m_stack = []\n\tenhanced._m_index = 0\n\tenhanced._m_ctx = ctx\n\n\tfunction middle_enhanced_fn() {\n\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments#Using_the_Spread_Syntax_with_Arguments\n\t\tconst args = [ ...arguments ]\n\n\t\tconsole.log('middle_enhanced_fn this', this && this.txt)\n\t\tdebugger\n\n\t\tif ( !ctx && ( ctx === undefined || ctx === null ) && this !== undefined ){\n\t\t\tenhanced._m_ctx = ctx = this\n\t\t}\n\n\t\tif ( enhanced._m_stack.length === enhanced._m_index ) {\n\n\t\t\tenhanced._m_index = 0\n\t\t\treturn fn.apply( ctx, args )\n\t\t}\n\n\t\targs.unshift( middle_enhanced_fn ) // pass middle_enhanced_fn as \"next\" function in first parameter\n\n\t\treturn enhanced._m_stack[ enhanced._m_index++ ].apply( ctx, args )\n\t}\n\n\tenhanced.use = ( useFn, useCtx, index ) => {\n\n\t\tlet bound\n\n\t\tif ( useCtx !== undefined && useCtx !== null )\n\t\t\tbound = useFn.bind( useCtx )\n\n\t\tif ( typeof index == 'number' )\n\n\t\t\tenhanced._m_stack.splice( index, 0, bound || useFn )\n\n\t\telse\n\n\t\t\tenhanced._m_stack.push( bound || useFn )\n\t}\n\n\tenhanced.subscribe = ( subFn, subCtx, index, onReturn ) => {\n\n\t\tconst used = function( next ) {\n\n\t\t\tconst args = [ ...arguments ]\n\n\t\t\tif ( !subCtx && ( subCtx === undefined || subCtx === null ))\n\t\t\t\tsubCtx = ctx\n\n\t\t\tif ( onReturn ){\n\n\t\t\t\tconst res = next.apply( ctx, args ) // continue chain\n\t\t\t\tsubFn.call( subCtx, res ) // call callback on return path\n\t\t\t\treturn res\n\n\t\t\t} else {\n\n\t\t\t\targs.shift() // remove the \"next\" parameter\n\t\t\t\tsubFn.apply( subCtx, args )\n\t\t\t\targs.unshift( next ) // put the \"next\" parameter back\n\t\t\t\treturn next.apply( ctx, args ) // continue chain\n\t\t\t}\n\n\t\t}\n\n\t\tenhanced.use( used, undefined, index )\n\n\t\treturn used\n\t}\n\n\treturn enhanced\n}\n\n// ES7 decorator ( https://www.martin-brennan.com/es7-decorators/ )\nexport function decorator( target, key, descriptor ) {\n\n\tif ( !target ) return\n\n\tconst { writable, enumerable } = descriptor\n\n\treturn {\n\t\tget: function () {\n\n\t\t\tconst newEnhanced = middle( descriptor.value, null, () => this )\n\t\t\tObject.defineProperty( this, key, {\n\t\t\t\tvalue: newEnhanced,\n\t\t\t\twritable: writable,\n\t\t\t\tenumerable: enumerable\n\t\t\t} )\n\n\t\t\treturn newEnhanced\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/middle.src.js"],"sourceRoot":""}